# Media Digest Email Template

HTML email format optimized for Gmail/Outlook rendering.

## Delivery

**Step 1: Sanitize** â€” convert markdown report to XSS-safe HTML:
```bash
python3 <SKILL_DIR>/scripts/sanitize-html.py --input /tmp/md-report.md --output /tmp/md-email.html
```

**Step 2: Send** via `gog gmail send`:
```bash
gog gmail send --to '<EMAIL>' --subject '<SUBJECT>' --body-html "$(cat /tmp/md-email.html)"
```

âš ï¸ **Security**: Never manually build HTML from fetched content. Always use sanitize-html.py which HTML-escapes all text, validates URLs (http/https only), and strips dangerous content.

## Template Structure

```html
<div style="max-width:640px;margin:0 auto;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;color:#1a1a1a;line-height:1.6">

  <h1 style="font-size:22px;border-bottom:2px solid #e5e5e5;padding-bottom:8px">
    ğŸ¬ {{TITLE}}
  </h1>

  <p style="color:#555;font-size:14px;background:#f8f9fa;padding:12px;border-radius:6px">
    {{EXECUTIVE_SUMMARY}}
  </p>

  <h2 style="font-size:17px;margin-top:24px;color:#333">{{emoji}} {{label}}</h2>
  <ul style="padding-left:20px">
    <li style="margin-bottom:10px">
      <strong>{{chinese_summary}}</strong> â€” {{description}}
      <br><a href="{{link}}" style="color:#0969da;font-size:13px">{{link}}</a>
    </li>
  </ul>

  <h2 style="font-size:17px;margin-top:24px;color:#333">ğŸ“¢ KOL Updates</h2>
  <ul style="padding-left:20px">
    <li style="margin-bottom:10px">
      <strong>{{display_name}}</strong> (@{{handle}}) â€” {{summary}}
      <br><code style="font-size:12px;color:#888;background:#f4f4f4;padding:2px 6px;border-radius:3px">ğŸ‘ {{views}} | ğŸ’¬ {{replies}} | ğŸ” {{retweets}} | â¤ï¸ {{likes}}</code>
      <br><a href="{{tweet_link}}" style="color:#0969da;font-size:13px">{{tweet_link}}</a>
    </li>
  </ul>

  <hr style="border:none;border-top:1px solid #e5e5e5;margin:24px 0">
  <p style="font-size:12px;color:#888">
    ğŸ“Š Data Sources: RSS {{rss_count}} | Twitter {{twitter_count}} | Web {{web_count}} | After dedup: {{merged_count}} articles
    <br>ğŸ¤– Generated by media-news-digest v{{version}} | Powered by <a href="https://openclaw.ai" style="color:#0969da">OpenClaw</a>
  </p>

</div>
```

## Style Guidelines

- **Max width**: 640px centered (mobile-friendly)
- **Fonts**: System font stack
- **All styles inline**: Email clients strip `<style>` tags
- **Links**: Full URLs, styled with `color:#0969da`
- **Chinese body + English links**
